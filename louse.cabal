name:                   louse
version:                0.1.0.0
synopsis:               Distributed bug tracker
description:            louse is a very simple distributed bug-tracking
                        system. It literally stores bugs in a JSON file. The
                        idea is pretty portable, although this implementation is
                        written in Haskell.
license:                GPL-3
license-file:           LICENSE
author:                 Peter Harpending
maintainer:             peter@harpending.org
copyright:              Copyright (C) 2015 Peter Harpending
category:               Data, Development, Git
build-type:             Simple
cabal-version:          >=1.10
data-files:             README.md
                        LICENSE
                        TUTORIAL.md
                        res/copyright.txt
                        res/schemata/*.yaml
                        res/templates/*.yaml
extra-source-files:     README.md
                        LICENSE
                        TUTORIAL.md
                        res/schemata/*.yaml
                        res/templates/*.yaml
flag dev
  description:          Enable development mode settings (such as disabling optimizations).
  default:              False

flag lib_only
  description:          Don't compile the louse executable
  default:              False

library
  default-language:     Haskell2010
  default-extensions:
    LambdaCase
    MultiParamTypeClasses
    MultiWayIf
    OverloadedStrings
    ScopedTypeVariables
    RankNTypes
  other-extensions:
    CPP
    FlexibleContexts
    FlexibleInstances
    NoOverloadedStrings
  exposed-modules:      Data.Louse
                        Data.Louse.Bugs
                        Data.Louse.DataFiles
                        Data.Louse.Initialize
                        Data.Louse.Query
                        Data.Louse.Query.Selector
                        Data.Louse.Read
                        Data.Louse.Remote.Repository
                        Data.Louse.Remote.Github
                        Data.Louse.Schemata
                        Data.Louse.Status
                        Data.Louse.Templates
                        Data.Louse.Trivia
                        Data.Louse.Types
                        Paths_louse
  build-depends:
      base ==4.*
    , base16-bytestring
    , bytestring
    , conduit >=1.2.3
    , conduit-combinators
    , conduit-extra
    , containers
    , cryptohash
    , crypto-random
    , directory >=1.2.2
    , editor-open >=0.4
    , exceptional >=0.1.4.3
    , github
    , MissingH
    , mtl
    , resourcet
    , safe
    , time
    , text
    , transformers
    , unordered-containers
    , yaml ==0.8.*
  if flag(dev)
    ghc-options:        -O0 -Wall
  else
    ghc-options:        -O2

executable louse
    hs-source-dirs:     bin
    build-depends:      base
                      , bytestring
                      , directory
                      , exceptional
                      , louse
                      , optparse-applicative ==0.11.*
                      , pager >=0.1.1
                      , text
                      , transformers
    default-language:   Haskell2010
    main-is:            louse.hs
    ghc-options:        -Wall
    if flag(lib_only)
      buildable:        False
    if flag(dev)
      ghc-options:      -O0 -Wall
    else
      ghc-options:      -O2

test-suite tests
    type:               exitcode-stdio-1.0
    default-language:   Haskell2010
    main-is:            Spec.hs
    hs-source-dirs:     tests
    ghc-options:        -Wall
    build-depends:      base ==4.8.*  
                      , louse
                      , safe
                      , hspec

source-repository head
  type:                 git
  location:             https://github.com/pharpend/louse.git
  branch:               master

source-repository this
  type:                 git
  location:             https://github.com/pharpend/louse.git
  branch:               master
  tag:                  0.1.0.0
